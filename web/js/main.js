/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

var requirejs,require,define;!function(e){function n(e,n){return v.call(e,n)}function t(e,n){var t,i,r,o,u,a,c,l,f,s,d,p=n&&n.split("/"),g=h.map,m=g&&g["*"]||{};if(e&&"."===e.charAt(0))if(n){for(e=e.split("/"),u=e.length-1,h.nodeIdCompat&&w.test(e[u])&&(e[u]=e[u].replace(w,"")),e=p.slice(0,p.length-1).concat(e),f=0;f<e.length;f+=1)if(d=e[f],"."===d)e.splice(f,1),f-=1;else if(".."===d){if(1===f&&(".."===e[2]||".."===e[0]))break;f>0&&(e.splice(f-1,2),f-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||m)&&g){for(t=e.split("/"),f=t.length;f>0;f-=1){if(i=t.slice(0,f).join("/"),p)for(s=p.length;s>0;s-=1)if(r=g[p.slice(0,s).join("/")],r&&(r=r[i])){o=r,a=f;break}if(o)break;!c&&m&&m[i]&&(c=m[i],l=f)}!o&&c&&(o=c,a=l),o&&(t.splice(0,a,o),e=t.join("/"))}return e}function i(n,t){return function(){var i=y.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),f.apply(e,i.concat([n,t]))}}function r(e){return function(n){return t(n,e)}}function o(e){return function(n){p[e]=n}}function u(t){if(n(g,t)){var i=g[t];delete g[t],m[t]=!0,l.apply(e,i)}if(!n(p,t)&&!n(m,t))throw new Error("No "+t);return p[t]}function a(e){var n,t=e?e.indexOf("!"):-1;return t>-1&&(n=e.substring(0,t),e=e.substring(t+1,e.length)),[n,e]}function c(e){return function(){return h&&h.config&&h.config[e]||{}}}var l,f,s,d,p={},g={},h={},m={},v=Object.prototype.hasOwnProperty,y=[].slice,w=/\.js$/;s=function(e,n){var i,o=a(e),c=o[0];return e=o[1],c&&(c=t(c,n),i=u(c)),c?e=i&&i.normalize?i.normalize(e,r(n)):t(e,n):(e=t(e,n),o=a(e),c=o[0],e=o[1],c&&(i=u(c))),{f:c?c+"!"+e:e,n:e,pr:c,p:i}},d={require:function(e){return i(e)},exports:function(e){var n=p[e];return"undefined"!=typeof n?n:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:c(e)}}},l=function(t,r,a,c){var l,f,h,v,y,w,x=[],b=typeof a;if(c=c||t,"undefined"===b||"function"===b){for(r=!r.length&&a.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=s(r[y],c),f=v.f,"require"===f)x[y]=d.require(t);else if("exports"===f)x[y]=d.exports(t),w=!0;else if("module"===f)l=x[y]=d.module(t);else if(n(p,f)||n(g,f)||n(m,f))x[y]=u(f);else{if(!v.p)throw new Error(t+" missing "+f);v.p.load(v.n,i(c,!0),o(f),{}),x[y]=p[f]}h=a?a.apply(p[t],x):void 0,t&&(l&&l.exports!==e&&l.exports!==p[t]?p[t]=l.exports:h===e&&w||(p[t]=h))}else t&&(p[t]=a)},requirejs=require=f=function(n,t,i,r,o){if("string"==typeof n)return d[n]?d[n](t):u(s(n,t).f);if(!n.splice){if(h=n,h.deps&&f(h.deps,h.callback),!t)return;t.splice?(n=t,t=i,i=null):n=e}return t=t||function(){},"function"==typeof i&&(i=r,r=o),r?l(e,n,t,i):setTimeout(function(){l(e,n,t,i)},4),f},f.config=function(e){return f(e)},requirejs._defined=p,define=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),n(p,e)||n(g,e)||(g[e]=[e,t,i])},define.amd={jQuery:!0}}(),define("almond",function(){}),define("zhl",[],function(){return window.zhl={},window.zhl.viewModels={},window.zhl}),define("tool",[],function(){function e(e){if(null==e)throw"specific can not be null";return e}function n(e,n){if(!e)throw"a container is required!";var i=document.createDocumentFragment();return t(n)?n.foreach(function(e){i.appendChild(e)}):i.appendChild(n),e.appendChild(i),i=null,e}function t(e){return"object"==typeof e&&e instanceof Array}function i(e,n){if(!e)throw"A canvas is required";var t,i=e,r=i.getContext("2d");if(devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStroePixelRatio||r.backingStroePixelRatio||1,ratio=devicePixelRatio/backingStoreRatio,"undefined"==typeof n&&(t=!0),t){var o=window.innerWidth,u=window.innerHeight;i.width=o*ratio,i.height=u*ratio,i.style.width=o+"px",i.style.height=u+"px",r.scale(ratio,ratio)}return i}var r={scaleCanvas:i,appendToPage:n,isArray:t,isNull:e};return r}),define("rain",["tool"],function(e){function n(n){function t(e){var n=document.getElementById(e);if(!n)throw"Canvas is not found!";return n}function i(){return Math.round(g.width/f)}function r(e){return{size:~~(20*(Math.random()-.5)+10),srcy:~~(g.height*Math.random()*.8),desy:0,xPos:e*f,db:4}}function o(e){for(var n=[],t=0;e>t;t++)n[t]=r(t);return n}function u(){h.fillStyle="rgba(0,0,0,.05)",h.fillRect(0,0,window.innerWidth,window.innerHeight-s),h.fillStyle="rgba(255,255,255,.08)",h.fillRect(0,window.innerHeight-s,window.innerWidth,s),h.fillStyle=d,v.map(function(e,n){var t=e.srcy-(window.innerHeight-e.desy);0>=t&&(e.db<2?(h.font="bold "+e.size+"px serif",h.fillText(e.text,e.xPos,e.srcy),e.db++):(e.text=String.fromCharCode(12448+Math.round(95*Math.random())),h.font="bold "+e.size+"px serif",h.fillText(e.text,e.xPos,e.srcy),e.db=0)),t>1e4*~~Math.random()&&(v[n]=r(n)),e.db<2?e.srcy++:e.srcy+=e.size})}function a(){return y=setInterval(u,30)}function c(e){clearInterval(e),start=null,g.style.display="none"}function l(e){g.setAttribute("class",p),setTimeout(function(){c(y),e()},3500)}const f=20,s=60,d="rgba(35,255,35,.8)",p="preface-hidden";var g,h,m,v,y;this.startRain=a,this.removeCanvas=l,g=t(n||""),g=e.scaleCanvas(g),h=g.getContext("2d"),h.fillStyle=d,m=i(),v=o(m)}return n}),define("logo",["tool"],function(e){function n(n){function t(e){var n=r("div");return n.setAttribute("class",l),n.innerHTML=e,n}function i(e){var n=e.split("");return n.map(function(e,n){return"<span class='char char"+n+"'>"+e+"</span>"}).join("")}function r(e){return document.createElement(e)}function o(e){e.getAttribute("class");e.setAttribute("class","container move")}function u(e){e.setAttribute("class","container stop")}function a(e){f.setAttribute("class","container move extendAway"),c(e)}function c(e){setTimeout(function(){d.style.display="none",e()},3500)}const l="container";var f,s,d;return d=document.getElementById(n),s=i("THE MATRIX"),f=t(s),e.appendToPage(d,f),{moveLight:function(){o(f)},stopLight:function(){u(f)},extendAway:a}}return n}),define("porfacePortrait",["tool"],function(e){function n(){function n(){r.el.style.opacity=0}function t(){r.el.style.display="none"}function i(t){var i=document.getElementById("escape-btn");i=e.isNull(i),i.addEventListener("click",function(){n(),t()})}var r={el:e.isNull(document.getElementById("preface-portrait")),removePortrait:t,addListener:i};return r}return n}),require(["zhl","rain","tool","logo","porfacePortrait"],function(){function e(){setTimeout(function(){t.rain.startRain();setTimeout(function(){t.portrait.removePortrait(),n(t.portrait),t.logo.moveLight(),setTimeout(function(){t.rain.removeCanvas(function(){n(t.rain)}),t.logo.extendAway(function(){n(t.logo)})},2800)},5e3)},500)}function n(e){e=null,delete e}var t=require("zhl"),i=require("rain"),r=require("logo"),o=(require("tool"),require("porfacePortrait"));t.rain=new i("preface"),t.logo=r("logo"),t.portrait=o(),t.portrait.addListener(e)}),define("main",function(){});